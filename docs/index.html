<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>MegaBot</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <header>
    <div class="logo" onclick="location.href='index.html'" style="cursor: pointer;">MegaBOT</div>
    <nav>
      <ul id="nav-links">
        <li><a href="dashboard.html">Dashboard</a></li>
        <li><a href="#" id="login-btn">Login</a></li>
      </ul>
    </nav>
  </header>

  <main>
    <h1>Welcome to MegaBot!</h1>

    <section class="invite-section">
      <h2>Invite MegaBot!</h2>
      <p>Invite MegaBot to your Discord server!</p>
      <button class="invite-btn" onclick="location.href='https://discord.com/api/oauth2/authorize?client_id=1396580632229843016&permissions=8&scope=bot%20applications.commands'">
        Invite to Server
      </button>
    </section>

    <section class="features">
      <h2>Features</h2>
      <ul>
        <li>Custom Command Creator</li>
        <li>Server Moderation Tools</li>
        <li>Interactive Dashboard</li>
        <li>Fun & Utility Commands</li>
      </ul>
    </section>

    <section class="commands">
      <h2>Popular Commands</h2>
      <ul>
        <li><code>/give</code> – Grant an item to a user</li>
        <li><code>/quiet</code> – Quiet a user (ephemeral message)</li>
        <li><code>/kill</code> – Simulate a dramatic exit</li>
        <li><code>/approve</code> – Approve a request</li>
      </ul>
    </section>
  </main>

  <script>
    // Auto-login based on localStorage
    const userData = localStorage.getItem("megabot_user");
    if (userData) {
      try {
        const user = JSON.parse(userData);
        const navLinks = document.getElementById("nav-links");
        navLinks.innerHTML = `
          <li class="dropdown">
            <img src="https://cdn.discordapp.com/avatars/${user.id}/${user.avatar}.png" alt="pfp" class="pfp" />
            <span class="username">${user.username}</span>
            <div class="dropdown-content">
              <a href="dashboard.html">Dashboard</a>
              <a href="#" onclick="logout()" style="color: red;">Log out</a>
            </div>
          </li>
        `;
      } catch (e) {
        console.error("Failed to parse user data:", e);
      }
    }

    function logout() {
      localStorage.removeItem("megabot_user");
      location.reload();
    }
  </script>
</body>
</html>